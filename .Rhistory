geom_point()
#Exercícios - capítulo 1 R4ds
library(tidyverse)
library(palmerpenguins)
library(ggthemes)
# 2. Make a scatterplot of hwy vs. displ using the mpg data frame. Next, map a third, numerical variable to color, then size, then both color and size, then shape. How do these aesthetics behave differently for categorical vs. numerical variables?
ggplot(
data = mpg,
mapping = aes(x = displ, y = hwy, color=year, size = 0.05, shape=model)) +
geom_point()
ggplot(
data = mpg,
mapping = aes(x = displ, y = hwy, color=year, size = 0.05 linewidth = model)) +
ggplot(
data = mpg,
mapping = aes(x = displ, y = hwy, color=year, size = 0.05, linewidth = model)) +
geom_point()
View(mpg)
ggplot(
data = mpg,
mapping = aes(x = displ, y = hwy, color=year, size = 0.05, linewidth = year)) +
geom_point()
ggplot(
data = mpg,
mapping = aes(x = displ, y = hwy, color=year, size = 0.05, shape=model,linewidth = year)) +
geom_point()
ggplot(penguins, aes(x = bill_length_mm, y = bill_depth_mm, color = species)) +
geom_point() +
labs(title = "Relação entre o comprimento e profundidade do bico",
x = "Comprimento do bico (mm)",
y = "Profundidade do bico (mm)") +
theme_minimal()
ggplot(penguins, aes(x = bill_length_mm, y = bill_depth_mm, color = species)) +
geom_point() +
geom_smooth(method = "lm") +
labs(title = "Relação entre o comprimento e profundidade do bico",
x = "Comprimento do bico (mm)",
y = "Profundidade do bico (mm)") +
theme_minimal()
ggplot(
data = penguins,
mapping = aes(
x = bill_length_mm, y = bill_depth_mm,
color = species, shape = species
)
) +
geom_point() +
labs(color = "Species")
ggplot(
data = penguins,
mapping = aes(
x = bill_length_mm, y = bill_depth_mm,
color = species, shape = species
)
) +
geom_point() +
labs(color = "species")
# RESPOSTA: O labs(color = "Species") renomeia apenas a legenda da cor, mas não a do formato (shape).Como os títulos das duas legendas (color e shape) são diferentes, o ggplot2 não entende que elas estão relacionadas à mesma variável.
# Para resolver, basta nomear as legendas idênticas:
ggplot(
data = penguins,
mapping = aes(
x = bill_length_mm, y = bill_depth_mm,
color = species, shape = species
)
) +
geom_point() +
labs(color = "species")
ggplot(penguins, aes(x = island, fill = species)) +
geom_bar(position = "fill")
ggplot(penguins, aes(x = species, fill = island)) +
geom_bar(position = "fill")
ggplot(mpg, aes(x = class)) +
geom_bar()
ggplot(mpg, aes(x = cty, y = hwy)) +
geom_point()
?ggsave
ggsave("mpg-plot.pdf")
getwd()
library(tidyverse)
ggplot(data = mpg, aes(x = displ, y = hwy)) +
geom_point(shape = 24, fill = "pink", color = "black", size = 3)
ggplot(mpg) +
geom_point(aes(x = displ, y = hwy, color = "blue"))
ggplot(data = mpg, aes(x = displ, y = hwy)) +
geom_point(shape = 24, fill = "pink", color = "black", size = 3)
geoms
library(tibble)
geoms <- tibble::tibble(
chart_type = c("Line chart", "Boxplot", "Histogram", "Area chart"),
geom_used  = c("geom_line()", "geom_boxplot()", "geom_histogram()", "geom_area()")
)
geoms
View(geoms)
getwd()
library(tidyverse)
getwd()
panorama_geral<- read.csv("C:\Users\rafae\Downloads\Projeto ADS\cnes_cnv_prid02br200612179_190_176_78.csv", stringsAsFactors = FALSE)
panorama_geral<- read.csv("C:/Users/rafae/Downloads/Projeto ADS/cnes_cnv_prid02br200612179_190_176_78.csv", stringsAsFactors = FALSE)
panorama_geral<- read.csv("C:/Users/rafae/Downloads/Projeto ADS/cnes_cnv_prid02br200612179_190_176_78.csv"
data(panorama_geral)
panorama_geral<- read.csv("C:/Users/rafae/Downloads/Projeto ADS/cnes_cnv_prid02br200612179_190_176_78.csv")
data(panorama_geral)
panorama_geral<- read.csv("cnes_cnv_prid02br200612179_190_176_78.csv")
panorama_geral<- read.csv("cnes_cnv_prid02br200612179_190_176_78.csv")
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
## Vamos aos dados
## Including Plots
obitos_fetais <- read.csv2("obitos_fetais.csv",
stringsAsFactors = FALSE,
fileEncoding = "latin1",
na = c("", "NA", "n/d", "NULL", "-"))
colnames(obitos_fetais) <- c(
"UF",
"Óbitos por ocorrência"
)
# Remover os números no início da string
obitos_fetais$UF <- gsub("^[0-9]+\\s+", "", obitos_fetais$UF)
setwd("C:/Users/rafae/Downloads/Projeto ADS")
getwd()
obitos_fetais <- read.csv2("obitos_fetais.csv",
stringsAsFactors = FALSE,
fileEncoding = "latin1",
na = c("", "NA", "n/d", "NULL", "-"))
colnames(obitos_fetais) <- c(
"UF",
"Óbitos por ocorrência"
)
# Remover os números no início da string
obitos_fetais$UF <- gsub("^[0-9]+\\s+", "", obitos_fetais$UF)
obitos_fetais$UF <- sapply(obitos_fetais$UF, function(uf) {
switch(uf,
"Rondï¿½nia" = "Rondônia",
"Acre" = "Acre",
"Amazonas" = "Amazonas",
"Roraima" = "Roraima",
"Parï¿½" = "Pará",
"Amapï¿½" = "Amapá",
"Tocantins" = "Tocantins",
"Maranhï¿½o" = "Maranhão",
"Piauï¿½" = "Piauí",
"Cearï¿½" = "Ceará",
"Paraï¿½ba" = "Paraíba",
"Pernambuco" = "Pernambuco",
"Alagoas" = "Alagoas",
"Sergipe" = "Sergipe",
"Bahia" = "Bahia",
"Minas Gerais" = "Minas Gerais",
"Espï¿½rito Santo" = "Espírito Santo",
"Rio de Janeiro" = "Rio de Janeiro",
"Sï¿½o Paulo" = "São Paulo",
"Paranï¿½" = "Paraná",
"Santa Catarina" = "Santa Catarina",
"Rio Grande do Sul" = "Rio Grande do Sul",
"Mato Grosso do Sul" = "Mato Grosso do Sul",
"Mato Grosso" = "Mato Grosso",
"Goiï¿½s" = "Goiás",
"Distrito Federal" = "Distrito Federal",
uf
)
})
View(obitos_fetais)
dados <- obitos_fetais[order(obitos_fetais$`Óbitos por ocorrência`, decreasing = TRUE), ]
# Gráfico de barras
ggplot(dados, aes(x = reorder(UF, `Óbitos por ocorrência`), y = `Óbitos por ocorrência`)) +
geom_bar(stat = "identity", fill = "steelblue") +
coord_flip() +
labs(title = "Óbitos por Ocorrência por Estado",
x = "Unidade Federativa (UF)",
y = "Óbitos por Ocorrência") +
theme_minimal()
obitos_fetais_tipos_partos <- read.csv2("tipos_partos.csv",
stringsAsFactors = FALSE,
fileEncoding = "latin1",
na = c("", "NA", "n/d", "NULL", "-"))
library(dplyr)
library(ggplot2)
# Gráfico de barras
ggplot(dados, aes(x = reorder(UF, `Óbitos por ocorrência`), y = `Óbitos por ocorrência`)) +
geom_bar(stat = "identity", fill = "steelblue") +
coord_flip() +
labs(title = "Óbitos por Ocorrência por Estado",
x = "Unidade Federativa (UF)",
y = "Óbitos por Ocorrência") +
theme_minimal()
ggplot(dados_longos, aes(x = reorder(UF, -Percentual), y = Percentual, fill = TipoParto)) +
geom_bar(stat = "identity") +
labs(title = "Proporção de Óbitos Fetais por Tipo de Parto e Estado",
x = "Estado",
y = "Percentual (%)",
fill = "Tipo de Parto") +
theme_minimal() +
theme(axis.text.x = element_text(angle = 45, hjust = 1))
obitos_fetais_tipos_partos <- read.csv2("tipos_partos.csv",
stringsAsFactors = FALSE,
fileEncoding = "latin1",
na = c("", "NA", "n/d", "NULL", "-"))
colnames(obitos_fetais_tipos_partos) <- c(
"UF",
"Não preenchido",
"Ignorado",
"Parto normal",
"Cesario",
"Total"
)
obitos_fetais_tipos_partos$`Não preenchido` <- NULL
obitos_fetais_tipos_partos$`Ignorado` <- NULL
obitos_fetais_tipos_partos$Total <- NULL
View(obitos_fetais_tipos_partos)
# Remover os números no início da string
obitos_fetais_tipos_partos$UF <- gsub("^[0-9]+\\s+", "", obitos_fetais_tipos_partos$UF)
obitos_fetais_tipos_partos$UF <- sapply(obitos_fetais_tipos_partos$UF, function(uf) {
switch(uf,
"Rondï¿½nia" = "Rondônia",
"Acre" = "Acre",
"Amazonas" = "Amazonas",
"Roraima" = "Roraima",
"Parï¿½" = "Pará",
"Amapï¿½" = "Amapá",
# Função para mapear UF para Região
get_regiao <- function(uf) {
switch(uf,
"Rondônia" = "Norte",
"Acre" = "Norte",
"Amazonas" = "Norte",
"Roraima" = "Norte",
"Pará" = "Norte",
# Criar a nova coluna de Região
obitos_fetais_tipos_partos$Regiao <- sapply(obitos_fetais_tipos_partos$UF, get_regiao)
# Transformar os dados em formato longo (long format)
dados_longos <- pivot_longer(obitos_fetais_tipos_partos,
cols = c("Parto normal", "Cesario"),
names_to = "TipoParto",
values_to = "Percentual")
View(obitos_fetais_tipos_partos)
ggplot(dados_longos, aes(x = reorder(UF, -Percentual), y = Percentual, fill = TipoParto)) +
geom_bar(stat = "identity") +
labs(title = "Proporção de Óbitos Fetais por Tipo de Parto e Estado",
x = "Estado",
y = "Percentual (%)",
fill = "Tipo de Parto") +
theme_minimal() +
theme(axis.text.x = element_text(angle = 45, hjust = 1))
# Transformar os dados em formato longo (long format)
dados_longos <- pivot_longer(obitos_fetais_tipos_partos,
cols = c("Parto normal", "Cesario"),
names_to = "TipoParto",
values_to = "Percentual")
library(tidyverse)
library(tidyr)
library(dplyr)
# Transformar os dados em formato longo (long format)
dados_longos <- pivot_longer(obitos_fetais_tipos_partos,
cols = c("Parto normal", "Cesario"),
names_to = "TipoParto",
values_to = "Percentual")
View(obitos_fetais_tipos_partos)
ggplot(dados_longos, aes(x = reorder(UF, -Percentual), y = Percentual, fill = TipoParto)) +
geom_bar(stat = "identity") +
labs(title = "Proporção de Óbitos Fetais por Tipo de Parto e Estado",
x = "Estado",
y = "Percentual (%)",
fill = "Tipo de Parto") +
theme_minimal() +
theme(axis.text.x = element_text(angle = 45, hjust = 1))
ggplot(dados_longos, aes(x = reorder(UF, -Percentual), y = Percentual, fill = TipoParto)) +
geom_bar(stat = "identity") +
labs(title = "Proporção de Óbitos Fetais por Tipo de Parto e Estado",
x = "Estado",
y = "Percentual (%)",
fill = "Tipo de Parto") +
theme_minimal() +
theme(axis.text.x = element_text(angle = 45, hjust = 1))
obitos_fetais_tipos_partos <- read.csv2("tipos_partos.csv",
stringsAsFactors = FALSE,
fileEncoding = "latin1",
na = c("", "NA", "n/d", "NULL", "-"))
colnames(obitos_fetais_tipos_partos) <- c(
"UF",
"Não preenchido",
"Ignorado",
"Parto normal",
"Cesario",
"Total"
)
obitos_fetais_tipos_partos$`Não preenchido` <- NULL
obitos_fetais_tipos_partos$`Ignorado` <- NULL
obitos_fetais_tipos_partos$Total <- NULL
View(obitos_fetais_tipos_partos)
# Remover os números no início da string
obitos_fetais_tipos_partos$UF <- gsub("^[0-9]+\\s+", "", obitos_fetais_tipos_partos$UF)
obitos_fetais_tipos_partos$UF <- sapply(obitos_fetais_tipos_partos$UF, function(uf) {
switch(uf,
"Rondï¿½nia" = "Rondônia",
"Acre" = "Acre",
"Amazonas" = "Amazonas",
"Roraima" = "Roraima",
"Parï¿½" = "Pará",
"Amapï¿½" = "Amapá",
# Função para mapear UF para Região
get_regiao <- function(uf) {
switch(uf,
"Rondônia" = "Norte",
"Acre" = "Norte",
"Amazonas" = "Norte",
"Roraima" = "Norte",
"Pará" = "Norte",
# Criar a nova coluna de Região
obitos_fetais_tipos_partos$Regiao <- sapply(obitos_fetais_tipos_partos$UF, get_regiao)
# Transformar os dados em formato longo (long format)
dados_longos <- pivot_longer(obitos_fetais_tipos_partos,
cols = c("Parto normal", "Cesario"),
names_to = "TipoParto",
values_to = "Percentual")
View(obitos_fetais_tipos_partos)
ggplot(dados_longos, aes(x = reorder(UF, -Percentual), y = Percentual, fill = TipoParto)) +
geom_bar(stat = "identity") +
labs(title = "Proporção de Óbitos Fetais por Tipo de Parto e Estado",
x = "Estado",
y = "Percentual (%)",
fill = "Tipo de Parto") +
theme_minimal() +
theme(axis.text.x = element_text(angle = 45, hjust = 1))
ggplot(dados_longos, aes(x = reorder(UF, -Percentual), y = Percentual, fill = TipoParto)) +
geom_bar(stat = "identity") +
labs(title = "Proporção de Óbitos Fetais por Tipo de Parto e Estado",
x = "Estado",
y = "Percentual (%)",
fill = "Tipo de Parto") +
theme_minimal() +
theme(axis.text.x = element_text(angle = 45, hjust = 1))
ggplot(dados_longos, aes(x = Regiao, y = Percentual, fill = TipoParto)) +
geom_col(position = "fill") +  # "fill" normaliza para porcentagem
scale_y_continuous(labels = scales::percent_format()) +
labs(
title = "Distribuição percentual dos tipos de parto por região",
x = "Região",
obitos_fetais_tipo_gestacao <- read.csv2("tipo_gestacao.csv",
stringsAsFactors = FALSE,
fileEncoding = "latin1",
na = c("", "NA", "n/d", "NULL", "-"))
ggplot(dados_longos, aes(x = Regiao, y = Percentual, fill = TipoParto)) +
geom_col(position = "fill") +
scale_y_continuous(labels = percent_format()) +
labs(
title = "Distribuição percentual dos tipos de parto por região",
x = "Região",
obitos_fetais_morte <- read.csv2("mortes.csv",
stringsAsFactors = FALSE,
fileEncoding = "latin1",
na = c("", "NA", "n/d", "NULL", "-"))
ggplot(dados_longos, aes(x = Regiao, y = Percentual, fill = TipoParto)) +
geom_col(position = "fill") +
scale_y_continuous(labels = percent_format()) +
labs(
title = "Distribuição percentual dos tipos de parto por região",
x = "Região",
ggplot(dados_longos, aes(x = Regiao, y = Percentual, fill = TipoParto)) +
geom_col(position = "fill") +
scale_y_continuous(labels = percent_format()) +
labs(
title = "",
x = "Região",
y = "Percentual",
ggplot(dados_longos, aes(x = Regiao, y = Percentual, fill = TipoParto)) +
geom_col(position = "fill") +
scale_y_continuous(labels = percent_format()) +
labs(
title = "Distribuição percentual dos tipos de parto por região",
x = "Região",
# Força a codificação correta para UTF-8
obitos_fetais_tipos_partos$UF <- iconv(obitos_fetais_tipos_partos$UF, from = "latin1", to = "UTF-8")
obitos_fetais_tipos_partos$Regiao <- iconv(obitos_fetais_tipos_partos$Regiao, from = "latin1", to = "UTF-8")
# Força a codificação correta para UTF-8
obitos_fetais_tipos_partos$UF <- iconv(obitos_fetais_tipos_partos$UF, from = "latin1", to = "UTF-8")
obitos_fetais_tipos_partos$Regiao <- iconv(obitos_fetais_tipos_partos$Regiao, from = "latin1", to = "UTF-8")
# Transformar os dados em formato longo (long format)
dados_longos <- pivot_longer(obitos_fetais_tipos_partos,
cols = c("Parto normal", "Cesario"),
names_to = "TipoParto",
values_to = "Percentual")
View(obitos_fetais_tipos_partos)
obitos_fetais_tipos_partos <- read.csv2("tipos_partos.csv",
stringsAsFactors = FALSE,
fileEncoding = "latin1",
na = c("", "NA", "n/d", "NULL", "-"))
colnames(obitos_fetais_tipos_partos) <- c(
"UF",
"Não preenchido",
"Ignorado",
"Parto normal",
"Cesario",
"Total"
)
obitos_fetais_tipos_partos$`Não preenchido` <- NULL
obitos_fetais_tipos_partos$`Ignorado` <- NULL
obitos_fetais_tipos_partos$Total <- NULL
View(obitos_fetais_tipos_partos)
# Remover os números no início da string
obitos_fetais_tipos_partos$UF <- gsub("^[0-9]+\\s+", "", obitos_fetais_tipos_partos$UF)
obitos_fetais_tipos_partos$UF <- sapply(obitos_fetais_tipos_partos$UF, function(uf) {
switch(uf,
"Rondï¿½nia" = "Rondônia",
"Acre" = "Acre",
"Amazonas" = "Amazonas",
"Roraima" = "Roraima",
"Parï¿½" = "Pará",
"Amapï¿½" = "Amapá",
# Função para mapear UF para Região
get_regiao <- function(uf) {
switch(uf,
"Rondônia" = "Norte",
"Acre" = "Norte",
"Amazonas" = "Norte",
"Roraima" = "Norte",
"Pará" = "Norte",
# Criar a nova coluna de Região
obitos_fetais_tipos_partos$Regiao <- sapply(obitos_fetais_tipos_partos$UF, get_regiao)
# Força a codificação correta para UTF-8
obitos_fetais_tipos_partos$UF <- iconv(obitos_fetais_tipos_partos$UF, from = "latin1", to = "UTF-8")
obitos_fetais_tipos_partos$Regiao <- iconv(obitos_fetais_tipos_partos$Regiao, from = "latin1", to = "UTF-8")
# Transformar os dados em formato longo (long format)
dados_longos <- pivot_longer(obitos_fetais_tipos_partos,
cols = c("Parto normal", "Cesario"),
names_to = "TipoParto",
values_to = "Percentual")
View(obitos_fetais_tipos_partos)
obitos_fetais_tipos_partos <- read.csv2("tipos_partos.csv",
stringsAsFactors = FALSE,
fileEncoding = "latin1",
na = c("", "NA", "n/d", "NULL", "-"))
colnames(obitos_fetais_tipos_partos) <- c(
"UF",
"Não preenchido",
"Ignorado",
"Parto normal",
"Cesario",
"Total"
)
obitos_fetais_tipos_partos$`Não preenchido` <- NULL
obitos_fetais_tipos_partos$`Ignorado` <- NULL
obitos_fetais_tipos_partos$Total <- NULL
View(obitos_fetais_tipos_partos)
# Remover os números no início da string
obitos_fetais_tipos_partos$UF <- gsub("^[0-9]+\\s+", "", obitos_fetais_tipos_partos$UF)
obitos_fetais_tipos_partos$UF <- sapply(obitos_fetais_tipos_partos$UF, function(uf) {
switch(uf,
"Rondï¿½nia" = "Rondônia",
"Acre" = "Acre",
"Amazonas" = "Amazonas",
"Roraima" = "Roraima",
"Parï¿½" = "Pará",
"Amapï¿½" = "Amapá",
# Função para mapear UF para Região
get_regiao <- function(uf) {
switch(uf,
"Rondônia" = "Norte",
"Acre" = "Norte",
"Amazonas" = "Norte",
"Roraima" = "Norte",
"Pará" = "Norte",
# Criar a nova coluna de Região
obitos_fetais_tipos_partos$Regiao <- sapply(obitos_fetais_tipos_partos$UF, get_regiao)
# Transformar os dados em formato longo (long format)
dados_longos <- pivot_longer(obitos_fetais_tipos_partos,
cols = c("Parto normal", "Cesario"),
names_to = "TipoParto",
values_to = "Percentual")
View(obitos_fetais_tipos_partos)
switch(uf,
"Rondï¿½nia" = "Rondônia",
"Acre" = "Acre",
"Amazonas" = "Amazonas",
"Roraima" = "Roraima",
"Parï¿½" = "Pará",
"Amapï¿½" = "Amapá",
obitos_fetais_tipos_partos <- read.csv2("tipos_partos.csv",
stringsAsFactors = FALSE,
fileEncoding = "latin1",
na = c("", "NA", "n/d", "NULL", "-"))
colnames(obitos_fetais_tipos_partos) <- c(
"UF",
"Não preenchido",
"Ignorado",
"Parto normal",
"Cesario",
"Total"
)
obitos_fetais_tipos_partos$`Não preenchido` <- NULL
obitos_fetais_tipos_partos$`Ignorado` <- NULL
obitos_fetais_tipos_partos$Total <- NULL
View(obitos_fetais_tipos_partos)
# Remover os números no início da string
obitos_fetais_tipos_partos$UF <- gsub("^[0-9]+\\s+", "", obitos_fetais_tipos_partos$UF)
obitos_fetais_tipos_partos$UF <- sapply(obitos_fetais_tipos_partos$UF, function(uf) {
switch(uf,
"Rondï¿½nia" = "Rondônia",
"Acre" = "Acre",
"Amazonas" = "Amazonas",
"Roraima" = "Roraima",
"Parï¿½" = "Pará",
"Amapï¿½" = "Amapá",
# Função para mapear UF para Região
get_regiao <- function(uf) {
switch(uf,
"Rondônia" = "Norte",
"Acre" = "Norte",
"Amazonas" = "Norte",
"Roraima" = "Norte",
"Pará" = "Norte",
View(obitos_fetais_tipos_partos)
